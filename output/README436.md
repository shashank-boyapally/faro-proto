# Utilities Plugin for Arcaflow

The Utilities plugin is used to store common utility functions used by various plugins/workflows.
Where each step of the plugin corresponds to a different utility functionality. Refer to individual step functions in utilities_plugin.py to see what input is expected for each step.

## To test:

In order to run the [utilities plugin](utilities_plugin.py) run the following steps:

### Containerized
1. Clone this repository
2. Create the container with `docker build -t arca-utilities -f Dockerfile`
3. Run `cat example.yaml | docker run -i arca-utilities -f -` to run the plugin


### Native

1. Clone this repository
2. Create a `venv` in the current directory with `python3 -m venv $(pwd)/venv`
3. Activate the `venv` by running `source venv/bin/activate`
4. Run `pip install poetry`
5. Run `poetry install`
6. Run `./utilities_plugin.py -f example.yaml ` to run the plugin


## Image Building

You can change this plugin's image version tag in
`.github/workflows/carpenter.yaml` by editing the
`IMAGE_TAG` variable, and pushing that change to the
branch designated in that workflow.

# Autogenerated Input/Output Documentation by Arcaflow-Docsgen Below

<!-- Autogenerated documentation by arcaflow-docsgen -->
## Generate UUID (`uuid`)

Generates a UUID which can be used by a workload

### Input

<table><tbody>
<tr><th>Type:</th><td><code>scope</code></td><tr><th>Root object:</th><td>InputParams</td></tr>
<tr><th>Properties</th><td></td></tr>
<tr><td colspan="2"><details><summary><strong>Objects</strong></summary><details><summary>InputParams (<code>object</code>)</summary>
            <table><tbody><tr><th>Type:</th><td><code>object</code></td><tr><th>Properties</th><td></td></tr>
</tbody></table>
        </details></details></td></tr>
</tbody></table>

### Outputs


#### error

<table><tbody>
<tr><th>Type:</th><td><code>scope</code></td><tr><th>Root object:</th><td>ErrorOutput</td></tr>
<tr><th>Properties</th><td><details><summary>error (<code>string</code>)</summary>
                <table><tbody><tr><th>Name:</th><td>Failure Error</td></tr><tr><th>Description:</th><td>Reason for failure</td></tr><tr><th>Required:</th><td>Yes</td></tr><tr><th>Type:</th><td><code>string</code></td></tbody></table>
            </details><details><summary>exit_code (<code>int</code>)</summary>
                <table><tbody><tr><th>Name:</th><td>Exit Code</td></tr><tr><th>Description:</th><td>Exit code returned in case of a failure</td></tr><tr><th>Required:</th><td>Yes</td></tr><tr><th>Type:</th><td><code>int</code></td>
</tbody></table>
            </details></td></tr>
<tr><td colspan="2"><details><summary><strong>Objects</strong></summary><details><summary>ErrorOutput (<code>object</code>)</summary>
            <table><tbody><tr><th>Type:</th><td><code>object</code></td><tr><th>Properties</th><td><details><summary>error (<code>string</code>)</summary>
        <table><tbody><tr><th>Name:</th><td>Failure Error</td></tr><tr><th>Description:</th><td>Reason for failure</td></tr><tr><th>Required:</th><td>Yes</td></tr><tr><th>Type:</th><td><code>string</code></td></tbody></table>
        </details><details><summary>exit_code (<code>int</code>)</summary>
        <table><tbody><tr><th>Name:</th><td>Exit Code</td></tr><tr><th>Description:</th><td>Exit code returned in case of a failure</td></tr><tr><th>Required:</th><td>Yes</td></tr><tr><th>Type:</th><td><code>int</code></td>
</tbody></table>
        </details></td></tr>
</tbody></table>
        </details></details></td></tr>
</tbody></table>

#### success

<table><tbody>
<tr><th>Type:</th><td><code>scope</code></td><tr><th>Root object:</th><td>SuccessOutputUUID</td></tr>
<tr><th>Properties</th><td><details><summary>uuid (<code>string</code>)</summary>
                <table><tbody><tr><th>Name:</th><td>UUID</td></tr><tr><th>Description:</th><td>UUID generated for a workload run</td></tr><tr><th>Required:</th><td>Yes</td></tr><tr><th>Type:</th><td><code>string</code></td></tbody></table>
            </details></td></tr>
<tr><td colspan="2"><details><summary><strong>Objects</strong></summary><details><summary>SuccessOutputUUID (<code>object</code>)</summary>
            <table><tbody><tr><th>Type:</th><td><code>object</code></td><tr><th>Properties</th><td><details><summary>uuid (<code>string</code>)</summary>
        <table><tbody><tr><th>Name:</th><td>UUID</td></tr><tr><th>Description:</th><td>UUID generated for a workload run</td></tr><tr><th>Required:</th><td>Yes</td></tr><tr><th>Type:</th><td><code>string</code></td></tbody></table>
        </details></td></tr>
</tbody></table>
        </details></details></td></tr>
</tbody></table>
<!-- End of autogenerated documentation -->
